(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){e.exports={centerPosition:"style_centerPosition__1K2sH",content:"style_content__1RHDI",input:"style_input__tHm6F"}},37:function(e,t,n){e.exports=n(56)},42:function(e,t,n){},43:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(31),o=n.n(c),l=(n(42),n(43),n(14)),u=n(6),i=n(32),s=(n(44),n(47),i.initializeApp({apiKey:"AIzaSyAk9YrjyfvDM-4va-X7b-__Y8UwkSOtynE",authDomain:"simpleproject-f43d9.firebaseapp.com",projectId:"simpleproject-f43d9",storageBucket:"simpleproject-f43d9.appspot.com",messagingSenderId:"946267297811",appId:"1:946267297811:web:c8e7eb2a90b99243ad47e6",measurementId:"G-2E6WXX3YWD"})),m=s.firestore(),p=s,f=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Home"),r.a.createElement("button",{onClick:function(){return p.auth().signOut()}},"Sign out"))},h=n(15),E=n.n(h),d=n(19),b=n(8),g=r.a.createContext(),v=function(e){var t=e.children,n=Object(a.useState)(null),c=Object(b.a)(n,2),o=c[0],l=c[1],u=Object(a.useState)(!0),i=Object(b.a)(u,2),s=i[0],m=i[1];return Object(a.useEffect)(function(){p.auth().onAuthStateChanged(function(e){l(e),m(!1)})},[]),s?r.a.createElement(r.a.Fragment,null,"Loading..."):r.a.createElement(g.Provider,{value:{currentUser:o}},t)},w=Object(u.g)(function(e){var t=e.history,n=Object(a.useCallback)(function(){var e=Object(d.a)(E.a.mark(function e(n){var a,r,c;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=n.target.elements,r=a.email,c=a.password,e.prev=2,e.next=5,p.auth().signInWithEmailAndPassword(r.value,c.value);case 5:t.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),alert(e.t0);case 11:case"end":return e.stop()}},e,null,[[2,8]])}));return function(t){return e.apply(this,arguments)}}(),[t]);return Object(a.useContext)(g).currentUser?r.a.createElement(u.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement("h1",null,"Log in"),r.a.createElement("form",{onSubmit:n},r.a.createElement("label",null,"Email",r.a.createElement("input",{name:"email",type:"email",placeholder:"Email"})),r.a.createElement("label",null,"Password",r.a.createElement("input",{name:"password",type:"password",placeholder:"Password"})),r.a.createElement("button",{type:"submit"},"Log in")))}),j={handleCodeInApp:!0,url:"https://simpleproject-f43d9.web.app/goto?user=ub1947"},y=Object(u.g)(function(e){var t=e.history,n=Object(a.useCallback)(function(){var e=Object(d.a)(E.a.mark(function e(n){var a,r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=n.target.elements,r=a.email,a.password,e.prev=2,e.next=5,p.auth().createUserWithEmailAndPassword(r.value,"qs351!").then(function(e){e.user});case 5:return window.localStorage.setItem("email",r.value),e.next=8,p.auth().sendSignInLinkToEmail(r.value,j).then(function(){console.log("success"),t.push("/")});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),alert(e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t){return e.apply(this,arguments)}}(),[t]);return r.a.createElement("div",null,r.a.createElement("h1",null,"Sign up"),r.a.createElement("form",{onSubmit:n},r.a.createElement("label",null,"Email",r.a.createElement("input",{name:"email",type:"email",placeholder:"Email"})),r.a.createElement("button",{type:"submit"},"Sign Up")))}),O=n(35),k=function(e){var t=e.component,n=Object(O.a)(e,["component"]),c=Object(a.useContext)(g).currentUser;return r.a.createElement(u.b,Object.assign({},n,{render:function(e){return c?r.a.createElement(t,e):r.a.createElement(u.a,{to:"/signup"})}}))};function S(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=n.length,r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*a));return t}var x=function(){var e=m.collection("users").doc("".concat(window.localStorage.getItem("email"))),t=r.a.useState(!1),n=Object(b.a)(t,2),a=n[0],c=n[1];return r.a.useEffect(function(){fetch("https://geo.ipify.org/api/v2/country?apiKey=at_etmOEjkHehGi2BpHy84aGCSOfFa96").then(function(e){return e.json()}).then(function(t){e.set({ip:t.ip,email:window.localStorage.getItem("email"),id:S(20),points:1,shareLink:"/link/referal/".concat(S(35))})}).then(function(){c(!0)}).catch(function(e){console.log(e)})},[]),r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(u.a,{to:"success"}))},C=n(20),I=n.n(C),_=n(57),A=n(60),P=function(e){var t=r.a.useState({}),n=Object(b.a)(t,2),a=n[0],c=n[1],o=r.a.useState(0),u=Object(b.a)(o,2),i=u[0],s=u[1],p=r.a.useState(0),f=Object(b.a)(p,2),h=f[0],E=f[1],d=r.a.useContext(g).currentUser;return r.a.useEffect(function(){m.collection("users").orderBy("points","desc").get().then(function(e){var t=0;E(e.size),e.forEach(function(e){if(t++,d.email==e.data().email)return s(t)})}).then(function(){m.collection("users").doc("".concat(d.email)).get().then(function(e){e.exists?(c(e.data()),console.log(a)):console.log("No such document!")})}).catch(function(e){console.log(e)})},[]),r.a.createElement("div",{className:I.a.centerPosition},r.a.createElement("h2",null,"You are all signed up!"),r.a.createElement("div",{className:I.a.content},r.a.createElement("h3",null,"Your rank is"),r.a.createElement("h3",null,i),r.a.createElement("p",null,"Your points = ",a.points," point(s)"),r.a.createElement("p",null,"Top ",function(e){var t=100*e/h;return t<10?10:t<50?50:t.toFixed(0)}(i),"%")),r.a.createElement("div",null,r.a.createElement("h4",null,"Want to increase your rank? See below"),r.a.createElement("p",null,"Get 2 points per person when you refer with your unique link below:"),r.a.createElement(_.a,{className:I.a.input},r.a.createElement(_.a.Text,null,"Copy"),r.a.createElement(A.a.Control,{onClick:function(e){return function(e){e.select(),e.setSelectionRange(0,99999),navigator.clipboard.writeText(e.value)}(e.target)},type:"text",value:"https://simpleproject-f43d9.web.app"+a.shareLink,readOnly:!0}))),r.a.createElement(l.b,{to:"/"},"Return to home page"))},F=function(e){var t=Object(u.f)(),n="".concat(t.pathname),a=r.a.useState(""),c=Object(b.a)(a,2),o=c[0],l=c[1],i=r.a.useState(0),s=Object(b.a)(i,2),p=s[0],f=s[1],h=r.a.useState(!1),E=Object(b.a)(h,2),d=E[0],g=E[1];return r.a.useEffect(function(){m.collection("users").where("shareLink","==",n).get().then(function(e){e.forEach(function(e){console.log(e),l(e.data().email),f(e.data().points)})}).then(function(){m.collection("users").doc(o).update({points:p+2}).then(function(){g(!0)})}).catch(function(e){return console.log(e)})}),r.a.createElement(r.a.Fragment,null,"Referal page...",d&&r.a.createElement(u.a,{to:"/signup"}))},L=n(58),U=n(59),W=n(34),D=(n(55),function(){return r.a.createElement(v,null,r.a.createElement(l.a,null,r.a.createElement(L.a,null,r.a.createElement(U.a,null,r.a.createElement(W.a,null,r.a.createElement(k,{exact:!0,path:"/",component:f}),r.a.createElement(u.b,{exact:!0,path:"/login",component:w}),r.a.createElement(u.b,{exact:!0,path:"/signup",component:y}),r.a.createElement(u.b,{path:"/goto",component:x}),r.a.createElement(u.b,{exact:!0,path:"/success",component:P}),r.a.createElement(u.b,{path:"/link/referal",component:F}))))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[37,1,2]]]);
//# sourceMappingURL=main.f0426c11.chunk.js.map